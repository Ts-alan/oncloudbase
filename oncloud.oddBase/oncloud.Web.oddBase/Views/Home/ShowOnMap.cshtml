@using oncloud.Domain.Entities
@{
    ViewBag.Title = "ShowOnMap";
}

<script src="~/Scripts/FullMapDisplay.js"></script>

<h2>ShowOnMap</h2>

<div class="row">
    <div id="search" class="col-lg-5 col-md-5 col-sm-12 col-xs-12"> show me!</div>
    <div id="map" style="width: 700px; height: 500px;" class="col-lg-7 col-md-7 col-sm-12 col-xs-12"></div>
</div>

<script type="text/javascript">
    ymaps.ready(init);
    var myMap;

    function init() {
        var coordsArray = @Html.Raw(ViewBag.json);
        console.log(coordsArray);
        myMap = new ymaps.Map("map", {
            center: [53.9172, 27.5601],
            zoom: 11
        });
        for (var i = 0; i < coordsArray.length; i++) {
            ymaps.route([[coordsArray[i].breadthS, coordsArray[i].lengthS], [coordsArray[i].breadthE, coordsArray[i].lengthE]]).then(function(route) {
                route.getPaths().options.set({
                    //можно выставить настройки графики маршруту
                    strokeColor: '0000ffff',
                    opacity: 0.9,
                    strokeWidth: 4
                });
                route.getPaths().events.add('click', pathClick);
                myMap.geoObjects.add(route.getPaths(), i);
            }, function(error) {
                alert('Возникла ошибка: ' + error.message);
            });
        }
    }

   

</script>